<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Jogo Corporativo</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .menu button { margin-right: 10px; }
        .hidden { display: none; }
        table { border-collapse: collapse; margin-top: 10px; }
        table, th, td { border: 1px solid #000; padding: 5px; }
        input, select { margin: 5px 0; }
        .edit-block { margin-top: 15px; border: 1px solid #333; padding: 10px; }
    </style>
</head>
<body>

<h1>Jogo Corporativo</h1>

<div class="menu">
    <button onclick="mostrar('usuarios')">Usuários</button>
    <button onclick="mostrar('perguntas')">Perguntas</button>
</div>

<div id="usuarios" class="hidden">
    <h2>Usuários</h2>

    <h3>Criar Usuário</h3>
    <input id="nome" placeholder="Nome"><br>
    <input id="email" placeholder="Email"><br>
    <button onclick="criarUsuario()">Salvar</button>

    <h3>Lista de Usuários</h3>
    <table id="tabelaUsuarios">
        <tr><th>Nome</th><th>Email</th><th>Ações</th></tr>
    </table>

    <div id="editarUsuarioBox" class="edit-block hidden">
        <h3>Editar Usuário</h3>
        <input id="editNome"><br>
        <input id="editEmail"><br>
        <button onclick="salvarEdicaoUsuario()">Salvar Alterações</button>
        <button onclick="cancelarEdicaoUsuario()">Cancelar</button>
    </div>
</div>

<div id="perguntas" class="hidden">
    <h2>Perguntas</h2>

    <h3>Criar Pergunta</h3>
    <input id="textoPergunta" placeholder="Texto da pergunta"><br>

    <select id="tipoPergunta">
        <option value="texto">Resposta em Texto</option>
        <option value="multipla">Múltipla Escolha</option>
    </select><br>

    <div id="opcoesMultipla" class="hidden">
        <h4>Alternativas:</h4>
        <input id="alt1" placeholder="Alternativa 1"><br>
        <input id="alt2" placeholder="Alternativa 2"><br>
        <input id="alt3" placeholder="Alternativa 3"><br>
        <input id="alt4" placeholder="Alternativa 4"><br>
    </div>

    <button onclick="criarPergunta()">Salvar</button>

    <h3>Lista de Perguntas</h3>
    <table id="tabelaPerguntas">
        <tr><th>Pergunta</th><th>Tipo</th><th>Ações</th></tr>
    </table>

    <div id="editarPerguntaBox" class="edit-block hidden">
        <h3>Editar Pergunta</h3>

        <input id="editTextoPergunta"><br>

        <select id="editTipoPergunta" disabled>
            <option value="texto">Resposta em Texto</option>
            <option value="multipla">Múltipla Escolha</option>
        </select><br>

        <div id="editOpcoesMultipla" class="hidden">
            <h4>Editar Alternativas</h4>
            <input id="editAlt1"><br>
            <input id="editAlt2"><br>
            <input id="editAlt3"><br>
            <input id="editAlt4"><br>
        </div>

        <button onclick="salvarEdicaoPergunta()">Salvar Pergunta</button>
        <button onclick="cancelarEdicaoPergunta()">Cancelar</button>
    </div>
</div>

<script>

function mostrar(secao) {
    document.getElementById("usuarios").classList.add("hidden");
    document.getElementById("perguntas").classList.add("hidden");
    document.getElementById(secao).classList.remove("hidden");

    if (secao === "usuarios") listarUsuarios();
    if (secao === "perguntas") listarPerguntas();
}

function criarUsuario() {
    const nome = document.getElementById("nome").value.trim();
    const email = document.getElementById("email").value.trim();

    if (!nome || !email) {
        alert("Preencha todos os campos!");
        return;
    }

    const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");

    usuarios.push({ nome, email });
    localStorage.setItem("usuarios", JSON.stringify(usuarios));

    document.getElementById("nome").value = "";
    document.getElementById("email").value = "";

    listarUsuarios();
}

function listarUsuarios() {
    const tabela = document.getElementById("tabelaUsuarios");
    const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");

    tabela.innerHTML = "<tr><th>Nome</th><th>Email</th><th>Ações</th></tr>";

    usuarios.forEach((u, i) => {
        tabela.innerHTML += `
            <tr>
                <td>${u.nome}</td>
                <td>${u.email}</td>
                <td>
                    <button onclick="editarUsuario(${i})">Editar</button>
                    <button onclick="excluirUsuario(${i})">Excluir</button>
                </td>
            </tr>
        `;
    });
}

let usuarioEditando = null;

function editarUsuario(i) {
    usuarioEditando = i;
    const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
    const u = usuarios[i];

    document.getElementById("editNome").value = u.nome;
    document.getElementById("editEmail").value = u.email;

    document.getElementById("editarUsuarioBox").classList.remove("hidden");
}

function salvarEdicaoUsuario() {
    const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");

    usuarios[usuarioEditando].nome =
        document.getElementById("editNome").value.trim();
    usuarios[usuarioEditando].email =
        document.getElementById("editEmail").value.trim();

    localStorage.setItem("usuarios", JSON.stringify(usuarios));

    cancelarEdicaoUsuario();
    listarUsuarios();
}

function cancelarEdicaoUsuario() {
    document.getElementById("editarUsuarioBox").classList.add("hidden");
}

function excluirUsuario(index) {
    const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
    usuarios.splice(index, 1);
    localStorage.setItem("usuarios", JSON.stringify(usuarios));
    listarUsuarios();
}

document.getElementById("tipoPergunta").addEventListener("change", function () {
    document.getElementById("opcoesMultipla").classList.toggle("hidden", this.value !== "multipla");
});

function criarPergunta() {
    const texto = document.getElementById("textoPergunta").value.trim();
    const tipo = document.getElementById("tipoPergunta").value;

    if (!texto) {
        alert("Digite a pergunta!");
        return;
    }

    const perguntas = JSON.parse(localStorage.getItem("perguntas") || "[]");

    let novaPergunta = { texto, tipo };

    if (tipo === "multipla") {
        novaPergunta.alternativas = [
            document.getElementById("alt1").value,
            document.getElementById("alt2").value,
            document.getElementById("alt3").value,
            document.getElementById("alt4").value
        ];
    }

    perguntas.push(novaPergunta);
    localStorage.setItem("perguntas", JSON.stringify(perguntas));

    document.getElementById("textoPergunta").value = "";
    document.getElementById("alt1").value =
    document.getElementById("alt2").value =
    document.getElementById("alt3").value =
    document.getElementById("alt4").value = "";

    listarPerguntas();
}

function listarPerguntas() {
    const tabela = document.getElementById("tabelaPerguntas");
    const perguntas = JSON.parse(localStorage.getItem("perguntas") || "[]");

    tabela.innerHTML = "<tr><th>Pergunta</th><th>Tipo</th><th>Ações</th></tr>";

    perguntas.forEach((p, i) => {
        tabela.innerHTML += `
            <tr>
                <td>${p.texto}</td>
                <td>${p.tipo}</td>
                <td>
                    <button onclick="editarPergunta(${i})">Editar</button>
                    <button onclick="excluirPergunta(${i})">Excluir</button>
                </td>
            </tr>
        `;
    });
}

let perguntaEditando = null;

function editarPergunta(i) {
    perguntaEditando = i;

    const perguntas = JSON.parse(localStorage.getItem("perguntas") || "[]");
    const p = perguntas[i];

    document.getElementById("editTextoPergunta").value = p.texto;
    document.getElementById("editTipoPergunta").value = p.tipo;

    if (p.tipo === "multipla") {
        document.getElementById("editOpcoesMultipla").classList.remove("hidden");
        document.getElementById("editAlt1").value = p.alternativas[0];
        document.getElementById("editAlt2").value = p.alternativas[1];
        document.getElementById("editAlt3").value = p.alternativas[2];
        document.getElementById("editAlt4").value = p.alternativas[3];
    } else {
        document.getElementById("editOpcoesMultipla").classList.add("hidden");
    }

    document.getElementById("editarPerguntaBox").classList.remove("hidden");
}

function salvarEdicaoPergunta() {
    const perguntas = JSON.parse(localStorage.getItem("perguntas") || "[]");

    const p = perguntas[perguntaEditando];
    p.texto = document.getElementById("editTextoPergunta").value.trim();

    if (p.tipo === "multipla") {
        p.alternativas = [
            document.getElementById("editAlt1").value,
            document.getElementById("editAlt2").value,
            document.getElementById("editAlt3").value,
            document.getElementById("editAlt4").value
        ];
    }

    localStorage.setItem("perguntas", JSON.stringify(perguntas));

    cancelarEdicaoPergunta();
    listarPerguntas();
}

function cancelarEdicaoPergunta() {
    document.getElementById("editarPerguntaBox").classList.add("hidden");
}

function excluirPergunta(index) {
    const perguntas = JSON.parse(localStorage.getItem("perguntas") || "[]");
    perguntas.splice(index, 1);
    localStorage.setItem("perguntas", JSON.stringify(perguntas));
    listarPerguntas();
}

</script>

</body>
</html>
